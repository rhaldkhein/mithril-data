/**
 * mithril-data v0.4.2
 * A rich data model library for Mithril javascript framework.
 * https://github.com/rhaldkhein/mithril-data
 * (c) 2017 Kevin Villanueva
 * License: MIT
 */
<<<<<<< HEAD
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function i(t){function e(e,n){f.call(this,n);var i=(this.__options.parse?this.options.parser(e):e)||{},o=t.props;-1===r.indexOf(o,c.keyId)&&o.push(c.keyId);for(var s,a=0;a<o.length;a++){if(s=o[a],!this.__isProp(s)||"id"===s&&s!==c.keyId)return;if(r.hasIn(this,s)&&"id"!==s)throw new Error("`"+s+"` prop is not allowed.");this[s]=this.__gettersetter(r.isUndefined(i[s])?t.defaults[s]:i[s],s)}}o(t);var n=l.isConflictExtend(f.prototype,t.methods);if(n)throw new Error("`"+n+"` method is not allowed.");return e.modelOptions=t,e.prototype=r.create(f.prototype,r.assign(t.methods||{},{constructor:e,options:t})),Object.setPrototypeOf(e,h.prototype),e}function o(t){t.defaults=t.defaults||{},t.props=r.union(t.props||[],r.keys(t.defaults)),t.refs=t.refs||{},t.parser=t.parser||function(t){return t}}var s,r=n(1),a=n(2),c=n(3).config,u=n(3).modelConstructors,f=n(4),h=n(10),l=n(6),d=n(8);Object.setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e.version=function(){return"v0.4.2"},e.BaseModel=f,e.Collection=n(8),e.State=n(9),e.store=n(5),e.stream=null,e.toStream=function(t){return t.constructor===e.stream?t:e.stream(t)},e.model=function(t,e){if(t=t||{},e=e||{},!t.name)throw new Error("Model name must be set.");var n=u[t.name]=i(t);return n.__init(e),n},e.model.get=function(t){return u[t]};var _={};if(e.config=function(t){t.modelMethods&&l.strictExtend(f.prototype,t.modelMethods),t.constructorMethods&&l.strictExtend(h.prototype,t.constructorMethods),t.collectionMethods&&l.strictExtend(d.prototype,t.collectionMethods),t.stream&&(e.stream=t.stream),t.modelMethods=null,t.constructorMethods=null,t.collectionMethods=null,r.assign(c,t)},e.resetConfig=function(){l.clearObject(c),e.config(_)},e.defaultConfig=function(t,n){r.assign(_,t),n||e.resetConfig()},e.defaultConfig({baseUrl:"",keyId:"id",store:a.request,stream:n(11),redraw:!1,storeBackground:!1,cache:!1,cacheLimit:100,placeholder:null}),s=function(){return e}.call(e,n,e,t),!(void 0!==s&&(t.exports=s)),"undefined"!=typeof window){var p;e.noConflict=function(){return p&&(window.md=p,p=null),window.md},window.__TEST__&&window.mocha&&window.chai&&(e.__TEST__={config:c,BaseModel:f,ModelConstructor:h}),window.md&&(p=window.md),window.md=e}},function(t,e){t.exports=_},function(t,e){t.exports=m},function(t,e){e.config={},e.modelConstructors={}},function(t,e,n){function i(t){this.__options={redraw:!1,parse:!0},this.__collections=[],this.__lid=o.uniqueId("model"),this.__saved=!1,this.__modified=!1,this.__fetching=!1,this.__json={__model:this},o.bindAll(this,o.union(h,r.modelBindMethods)),t&&this.opt(t)}var o=n(1),s=n(2),r=n(3).config,a=n(3).modelConstructors;t.exports=i;var c=n(5),u=n(6),f=n(8),h=[],l={has:1,keys:0,values:0,pick:1,omit:1};i.prototype={opt:function(t,e){o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=o.isUndefined(e)?!0:e},id:function(t){return t?this[r.keyId](t,!0):this[r.keyId]()},lid:function(){return this.__lid},url:function(){return r.baseUrl+(this.options.url||"/"+this.options.name.toLowerCase())},attachCollection:function(t){if(!(t instanceof f))throw new Error("Argument `collection` must be instance of Collection.");var e=t.get(this);e&&-1===o.indexOf(this.__collections,t)?this.__collections.push(t):t.add(this)},detachCollection:function(t){if(!(t instanceof f))throw new Error("Argument `collection` must be instance of Collection.");t.get(this)&&t.remove(this),o.indexOf(this.__collections,t)>-1&&o.pull(this.__collections,t)},set:function(t,e,n,i){o.isString(t)?this[t](e,n):this.setObject(t,n,i)},setObject:function(t,e,n){var s=t instanceof i;if(!s&&!o.isPlainObject(t))throw new Error("Argument `obj` must be a model or plain object.");for(var r,a,c=!s&&this.__options.parse?this.options.parser(t):t,u=o.keys(c),f=u.length-1;f>=0;f--)r=u[f],a=c[r],this.__isProp(r)&&o.isFunction(this[r])&&(s&&o.isFunction(a)?this[r](a(),!0,n):this[r](a,!0,n));e||this.__update()},get:function(t){return t?this[t]():this.getCopy()},getJson:function(){return this.__json},getCopy:function(t,e){for(var n,s,r={},a=o.keys(this.__json),c=0;c<a.length;c++)n=a[c],s=this.__json[n],this.__isProp(n)&&(s&&s.__model instanceof i?r[n]=e?s.__model.id():s.__model.getCopy(t,!0):r[n]=s);return t?o.cloneDeep(r):r},save:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return new Promise(function(i,s){var r=n.id()?c.put:c.post;r.call(c,n.url(),n,t).then(function(s){n.set(t&&t.path?o.get(s,t.path):s,null,null,!0),n.__saved=!!n.id(),n.__addToCache(),i(n),o.isFunction(e)&&e(null,s,n)},function(t){s(t),o.isFunction(e)&&e(t)})})},fetch:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return n.__fetching=!0,new Promise(function(i,s){var a=n.__getDataId();a[r.keyId]?c.get(n.url(),a,t).then(function(s){n.set(t&&t.path?o.get(s,t.path):s,null,null,!0),n.__saved=!!n.id(),n.__fetching=!1,n.__addToCache(),i(n),o.isFunction(e)&&e(null,s,n)},function(t){n.__fetching=!1,s(t),o.isFunction(e)&&e(t)}):(n.__fetching=!1,s(new Error("Model must have an id to fetch")),o.isFunction(e)&&e(!0))})},populate:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return new Promise(function(i,s){var c,u=n.options.refs,f=0;o.forEach(u,function(u,h){var l=n.__json[h];if(o.isString(l)||o.isNumber(l)){var d={};d[r.keyId]=l;var _=a[u].create(d);_.isSaved()?n[h](_):(f++,_.fetch(t&&t.fetchOptions&&t.fetchOptions[h]?t.fetchOptions[h]:null,function(t,r,a){f--,t?c=t:n[h](a),f||(c?(s(c),o.isFunction(e)&&e(null,c)):(i(n),o.isFunction(e)&&e(null,n)))}))}}),f||(i(n),o.isFunction(e)&&e(null,n))})},destroy:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return new Promise(function(i,s){var a=n.__getDataId();a[r.keyId]?c.destroy(n.url(),a,t).then(function(){n.detach(),i(),o.isFunction(e)&&e(null),n.dispose()},function(t){s(t),o.isFunction(e)&&e(t)}):(s(new Error("Model must have an id to destroy")),o.isFunction(e)&&e(!0))})},remove:function(){this.detach(),this.dispose()},detach:function(){for(var t=o.clone(this.__collections),e=0;e<t.length;e++)t[e].remove(this),t[e]=null},dispose:function(){var t,e=o.keys(this),n=this.options.props;for(this.__json.__model=null,t=0;t<n.length;t++)this[n[t]](null);for(t=0;t<e.length;t++)this[e[t]]=null},isSaved:function(){return this.__saved},isNew:function(){return!this.__saved},isModified:function(){return this.__modified},isDirty:function(){return!this.isSaved()||this.isModified()},isFetching:function(){return this.__fetching},__update:function(){for(var t,e=0;e<this.__collections.length;e++)this.__collections[e].__update(!0)&&(t=!0);(t||this.__options.redraw||this.options.redraw||r.redraw)&&s.redraw()},__isProp:function(t){return o.indexOf(this.options.props,t)>-1},__getDataId:function(){var t={};return t[r.keyId]=this.id(),t},__addToCache:function(){this.constructor.__options.cache&&!this.constructor.__cacheCollection.contains(this)&&this.__saved&&this.constructor.__cacheCollection.add(this)},__gettersetter:function(t,e){function n(){var t;if(arguments.length){t=arguments[0];var n=c.options.refs[e];if(n){var u=a[n];o.isPlainObject(t)?t=u.create(t):(o.isString(t)||o.isNumber(t))&&u.__cacheCollection&&(t=u.__cacheCollection.get(t)||t)}return t instanceof i&&(t.__saved=t.__saved||!(!arguments[2]||!t.id()),t=t.getJson()),s(t),c.__modified=arguments[2]?!1:!arguments[3]&&c.__json[e]!==s._state.value,c.__json[e]=s._state.value,arguments[1]||c.__update(e),t}return t=s(),t&&t.__model instanceof i?t=t.__model:o.isNil(t)&&c.options&&!o.isNil(c.options.defaults[e])&&(t=c.options.defaults[e]),r.placeholder&&c.__fetching&&e!==r.keyId&&o.isString(t)?r.placeholder:t}var s=r.stream(),c=this;return n.stream=s,n.call(this,t,!0,void 0,!0),n}},u.addMethods(i.prototype,o,l,"__json")},function(t,e,n){function i(t,e){u.storeConfigXHR&&u.storeConfigXHR(t,e),t.setRequestHeader("Content-Type","application/json")}function o(t,e){return u.storeExtract?u.storeExtract(t,e):t.responseText.length?r(t.responseText):null}function s(t){return a(t),u.storeSerializer?u.storeSerializer(t):JSON.stringify(t)}function r(t){if(u.storeDeserializer)return u.storeDeserializer(t);try{return JSON.parse(t)}catch(e){return t}}function a(t){var e;for(var n in t)e=t[n],c.isObject(e)&&(t[n]=e[u.keyId]||e)}var c=n(1),u=n(3).config,f=n(4);t.exports=c.create(null,{request:function(t,e,n,a){var h={method:e||"GET",url:t,data:(n instanceof f?n.getCopy():n)||{},background:!!u.storeBackground,serialize:s,deserialize:r,config:i,extract:o};return a&&(h=c.defaultsDeep(a,h)),u.storeConfigOptions&&u.storeConfigOptions(h),u.store(h)},get:function(t,e,n){return this.request(t,"GET",e,n)},post:function(t,e,n){return this.request(t,"POST",e,n)},put:function(t,e,n){return this.request(t,"PUT",e,n)},destroy:function(t,e,n){return this.request(t,"DELETE",e,n)}})},function(t,e,n){(function(e){function i(t,e){return function(n,i,o,s){return t(n?n[e]||n:n,i?i[e]||i:i,o,s)}}function o(t,e){for(var n,o=t.length-1;o>=0;o--)n=t[o],a.isFunction(n)?t[o]=i(n,e):n instanceof u&&(t[o]=n.__json);return t}function s(t,e,n){if(t===e)return t;if(a.isArray(t)){for(var i,o=t.length-1;o>=0;o--)i=t[o],i&&i[n]&&(t[o]=i[n]);return t}return t?t[n]||t:t}function r(){return f&&window.setImmediate?window.setImmediate:"object"==typeof e&&"function"==typeof e.nextTick?e.nextTick:function(t){setTimeout(t,0)}}var a=n(1),c=Array.prototype.slice,u=n(4),f="undefined"!=typeof window;t.exports=a.create(null,{isBrowser:f,nextTick:r(),clearObject:function(t){for(var e in t)delete t[e]},hasValueOfType:function(t,e){for(var n=a.keys(t),i=0;i<n.length;i++)if(t[n[i]]instanceof e)return!0;return!1},isConflictExtend:function(t,e){for(var n=a.keys(e),i=0;i<n.length;i++)if(a.hasIn(t,n[i]))return n[i];return!1},strictExtend:function(t,e){var n=this.isConflictExtend(t,e);if(n)throw new Error("`"+n+"` method / property is not allowed.");a.extend(t,e)},addMethods:function(t,e,n,r,f){a.each(n,function(n,h){if(e[h])switch(n){case 0:t[h]=function(){return s(e[h](this[r]),this[r],f)};break;case 1:t[h]=function(t){return a.isFunction(t)?t=i(t,f):t instanceof u&&(t=t.__json),s(e[h](this[r],t),this[r],f)};break;case 2:t[h]=function(t,n){return a.isFunction(t)?t=i(t,f):t instanceof u&&(t=t.__json),a.isFunction(n)?n=i(n,f):n instanceof u&&(n=n.__json),s(e[h](this[r],t,n),this[r],f)};break;default:t[h]=function(){var t=o(c.call(arguments),f);return t.unshift(this[r]),s(e[h].apply(e,t),this[r],f)}}})}})}).call(e,n(7))},function(t,e){function n(){u&&r&&(u=!1,r.length?c=r.concat(c):f=-1,c.length&&i())}function i(){if(!u){var t=setTimeout(n);u=!0;for(var e=c.length;e;){for(r=c,c=[];++f<e;)r&&r[f].run();f=-1,e=c.length}r=null,u=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var r,a=t.exports={},c=[],u=!1,f=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||u||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){function i(t){this.models=[],this.__options={redraw:!1,_cache:!1},t&&this.opt(t);var e=this.__options.state;e&&(e instanceof u||(e=new u(e)),this.__state=e),o.bindAll(this,o.union(f,a.collectionBindMethods)),this.__fetching=!1}var o=n(1),s=n(2),r=n(6),a=n(3).config,c=n(4),u=n(9);t.exports=i,i.prototype={opt:function(t,e){o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=o.isUndefined(e)?!0:e},add:function(t,e,n){if(!(t instanceof c)||this.__options.model&&!(t instanceof this.__options.model))throw new Error("Must be a model or an instance of set model");var i=this.get(t),o=!1;return i?i.set(t):(e?this.models.unshift(t.getJson()):this.models.push(t.getJson()),t.attachCollection(this),this.__state&&this.__state.set(t.lid()),o=!0),o&&!n&&this.__update(),o},addAll:function(t,e,n){o.isArray(t)||(t=[t]);for(var i=!1,s=0;s<t.length;s++)this.add(t[s],e,!0)&&(i=!0);return i&&!n&&this.__update(),i},create:function(t,e){o.isArray(t)||(t=[t]);for(var n,i,s=[],r=0;r<t.length;r++){if(i=t[r],!o.isPlainObject(i))throw new Error("Plain object required");n=this.get(i),n?n.set(i,!0):this.__options.model&&s.push(this.__options.model.create(i,e))}return this.addAll(s),s},get:function(t){var e;if(t instanceof c)return this.contains(t)?t:void 0;if(o.isObject(t)){if(!t[a.keyId])return this.find(t)||void 0;t=t[a.keyId]}return e=this.find([a.keyId,t]),e||void 0},getAll:function(t,e){o.isArray(t)||(t=[t]);for(var n,i=[],s=0;s<t.length;s++)n=this.get(t[s]),(n||e)&&i.push(n);return i},remove:function(t,e){o.isArray(t)||(t=[t]);var n,i,s,r=this.size(),u=[];if(r){for(s=0;s<t.length;s++){if(i=t[s],!i)throw new Error("Can't remove from collection. Argument must be set.");i instanceof c?u.push.apply(u,o.remove(this.models,function(t){return o.eq(t,i.getJson())})):o.isObjectLike(i)?u.push.apply(u,o.remove(this.models,function(t){return o.isMatch(t,i)})):u.push.apply(u,o.remove(this.models,function(t){return n={},n[a.keyId]=i,o.isMatch(t,n)}))}var f;for(s=0;s<u.length;s++)f=u[s].__model,f.detachCollection(this),this.__state&&this.__state.remove(f.lid());return r!==this.size()?(e||this.__update(),!0):!1}},push:function(t,e){return this.addAll(t,e)},unshift:function(t,e){return this.addAll(t,!0,e)},shift:function(t){var e=this.first();return this.remove(e,t),e},pop:function(t){var e=this.last();return this.remove(e,t),e},clear:function(t){return this.remove(this.toArray(),t)},pluck:function(t){for(var e=[],n="id"===t,i=0,o=this.models;i<o.length;i++)e.push(n?o[i].__model[t]():o[i][t]);return e},dispose:function(){var t=o.keys(this),e=0;for(this.__options.model&&(this.__options.model=null),this.__state&&this.__state.dispose();e<t.length;e++)this[t[e]]=null},destroy:function(){this.clear(!0),this.dispose()},stateOf:function(t){if(this.__state){var e=this.get(t);if(e)return this.__state.get(e.lid())}},contains:function(t){if(t instanceof c)return this.indexOf(t.getJson())>-1;if(o.isObject(t)){if(!t[a.keyId])return this.findIndex(t)>-1;t=t[a.keyId]}return this.findIndex([a.keyId,t])>-1},sort:function(t,e){o.isArray(t)||(t=[t]);var n;e?(o.isArray(e)||(e=[e]),n=this.orderBy(t,e)):n=this.orderBy(t),this.__replaceModels(n)},sortByOrder:function(t,e){e||(e=a.keyId),this.__replaceModels(this.sortBy([function(n){return t.indexOf(o.get(n,e))}]))},randomize:function(){this.__replaceModels(this.shuffle())},hasModel:function(){return!!this.__options.model},model:function(){return this.__options.model},url:function(t){var e=t?"":a.baseUrl;return this.__options.url?e+=this.__options.url:this.hasModel()&&(e+=this.model().modelOptions.url||"/"+this.model().modelOptions.name.toLowerCase()),e},fetch:function(t,e,n){o.isFunction(e)&&(n=e,e=void 0);var i=this;return i.__fetching=!0,new Promise(function(s,r){i.hasModel()?(e=e||{},i.model().pull(i.url(),t,e,function(t,a,c){i.__fetching=!1,t?(r(t),o.isFunction(n)&&n(t)):(e.clear&&i.clear(!0),i.addAll(c),s(c),o.isFunction(n)&&n(null,a,c))})):(i.__fetching=!1,r(new Error("Collection must have a model to perform fetch")),o.isFunction(n)&&n(!0))})},isFetching:function(){return this.__fetching},__replaceModels:function(t){for(var e=t.length-1;e>=0;e--)this.models[e]=t[e].__json},__update:function(t){return this.__options._cache||!this.__options.redraw&&!a.redraw?void 0:(t||s.redraw(),!0)}};var f=[],h={difference:1,every:1,find:1,findIndex:1,findLastIndex:1,filter:1,first:0,forEach:1,indexOf:2,initial:0,invoke:3,groupBy:1,last:0,lastIndexOf:2,map:1,maxBy:1,minBy:1,nth:1,orderBy:2,reduce:-1,reject:1,reverse:0,sample:0,shuffle:0,size:0,slice:1,sortBy:1,some:1,transform:2,toArray:0,without:1};r.addMethods(i.prototype,o,h,"models","__model")},function(t,e,n){function i(){var t={};for(var e in this)-1===r.indexOf(u,e)&&(t[e]=this[e]());return t}function o(t,e,n,i){var o,s=n&&n.store?n.store:a.stream;for(var c in t){if(r.indexOf(u,c)>-1)throw new Error("State key `"+c+"` is not allowed.");o=t[c],e[c]=r.isFunction(o)?o:s(o,c,i,n)}return e}function s(t,e){if(r.isArray(t)){this.signature=r.invert(t);for(var n in this.signature)this.signature[n]=void 0}else this.signature=t;this._options=e,this.map={}}var r=n(1),a=n(3).config,c="__key__",u=["factory","toJson","_options"];t.exports=s,s.create=function(t,e){return o(t,{toJson:i},e)},s.assign=function(t,e,n){o(e,t,n)},s.prototype={set:function(t){return t||(t=c),this.map[t]||(this.map[t]=o(this.signature,{factory:a.stream(this),toJson:i},this._options,t)),this.map[t]},get:function(t){return t||(t=c),this.map[t]||this.set(t),this.map[t]},remove:function(t){if(t||(t=c),this.map[t]){var e,n=r.keys(this.map[t]);for(e=0;e<n.length;e++)this.map[t][n[e]]=null;delete this.map[t]}},dispose:function(){var t,e,n=r.keys(this),i=r.keys(this.map),o=r.keys(this.signature);for(t=0;t<i.length;t++){for(e=0;e<o.length;e++)this.map[i[t]][o[e]]=null;this.map[i[t]]=null}for(t=0;t<n.length;t++)this[n[t]]=null}}},function(t,e,n){function i(){}var o=n(1),s=n(5),r=n(3).config,a=n(8);t.exports=i,i.prototype={__init:function(t){this.__options||(this.__options={redraw:!1,cache:r.cache===!0},t&&this.opt(t),this.__options.cache&&(this.__cacheCollection=new a({model:this,_cache:!0}),this.__options.cacheLimit||(this.__options.cacheLimit=r.cacheLimit)))},__flagSaved:function(t){for(var e=0;e<t.length;e++)t[e].__saved=!0},opt:function(t,e){this.__options||this.__init(),o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=o.isUndefined(e)?!0:e},create:function(t,e){if(null==t&&(t={}),!o.isPlainObject(t))throw new Error("Plain object required");var n;return this.modelOptions.parser&&(t=this.modelOptions.parser(t)),this.__options.cache&&t[r.keyId]?(n=this.__cacheCollection.get(t),n||(n=new this(t,e),this.__cacheCollection.add(n),this.__cacheCollection.size()>this.__options.cacheLimit&&this.__cacheCollection.shift())):n=new this(t,e),n},createCollection:function(t){return new a(o.assign({model:this},t))},createModels:function(t,e){o.isArray(t)||(t=[t]);for(var n=[],i=0;i<t.length;i++)n[i]=this.create(t[i],e);return n},pull:function(t,e,n,i){o.isFunction(e)?(i=e,e=void 0):o.isFunction(n)&&(i=n,n=e,e=void 0);var r=this;return new Promise(function(a,c){s.get(t,e,n).then(function(t){var e=r.createModels(n&&n.path?o.get(t,n.path):t,n);r.__flagSaved(e),a(e),o.isFunction(i)&&i(null,t,e)},function(t){c(t),o.isFunction(i)&&i(t)})})}}},function(t,e,n){t.exports=n(12)},function(t,e,n){(function(t){"use strict";function e(){function t(){return arguments.length>0&&arguments[0]!==O&&i(t,arguments[0]),t._state.value}return n(t),arguments.length>0&&arguments[0]!==O&&i(t,arguments[0]),t}function n(t){t.constructor=e,t._state={id:w++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0},t.map=t["fantasy-land/map"]=h,t["fantasy-land/ap"]=l,t["fantasy-land/of"]=e,t.valueOf=d,t.toJSON=_,t.toString=d,Object.defineProperties(t,{end:{get:function(){if(!t._state.endStream){var n=e();n.map(function(e){return e===!0&&(f(t),f(n)),e}),t._state.endStream=n}return t._state.endStream}}})}function i(t,e){o(t,e);for(var n in t._state.deps)s(t._state.deps[n],!1);r(t)}function o(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function s(t,e){var n=t._state,i=n.parents;if(i.length>0&&i.every(m)&&(e||i.some(v))){var s=t._state.derive();if(s===O)return!1;o(t,s)}}function r(t){t._state.changed=!1;for(var e in t._state.deps)t._state.deps[e]._state.changed=!1}function a(t,n){if(!n.every(p))throw new Error("Ensure that each item passed to m.prop.combine/m.prop.merge is a stream");return c(e(),n,function(){return t.apply(this,n.concat([n.filter(v)]))})}function c(t,e,n){var i=t._state;return i.derive=n,i.parents=e.filter(g),u(t,i.parents),s(t,!0),t}function u(t,e){for(var n=0;n<e.length;n++)e[n]._state.deps[t._state.id]=t,u(t,e[n]._state.parents)}function f(t){for(var e=0;e<t._state.parents.length;e++){var n=t._state.parents[e];delete n._state.deps[t._state.id]}for(var i in t._state.deps){var o=t._state.deps[i],s=o._state.parents.indexOf(t);s>-1&&o._state.parents.splice(s,1)}t._state.state=2,t._state.deps={}}function h(t){return a(function(e){return t(e())},[this])}function l(t){return a(function(t,e){return t()(e())},[t,this])}function d(){return this._state.value}function _(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function p(t){return t._state}function m(t){return 1===t._state.state}function v(t){return t._state.changed}function g(t){return 2!==t._state.state}function y(t){return a(function(){return t.map(function(t){return t()})},t)}var w=0,O={};e["fantasy-land/of"]=e,e.merge=y,e.combine=a,e.HALT=O,t.exports=e}).call(e,n(13)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);
=======
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function i(t){function e(e,n){f.call(this,n);var i=(this.__options.parse?this.options.parser(e):e)||{},o=t.props;s.indexOf(o,c.keyId)===-1&&o.push(c.keyId);for(var r,a=0;a<o.length;a++){if(r=o[a],!this.__isProp(r)||"id"===r&&r!==c.keyId)return;if(s.hasIn(this,r)&&"id"!==r)throw new Error("`"+r+"` prop is not allowed.");this[r]=this.__gettersetter(s.isUndefined(i[r])?t.defaults[r]:i[r],r)}}o(t);var n=l.isConflictExtend(f.prototype,t.methods);if(n)throw new Error("`"+n+"` method is not allowed.");if(e.modelOptions=t,e.prototype=s.create(f.prototype,s.assign(t.methods||{},{constructor:e,options:t})),Object.setPrototypeOf(e,h.prototype),!s.isEmpty(t.statics)){var i=l.isConflictExtend(e,t.statics);if(i)throw new Error("`"+i+"` method is not allowed for statics.");s.assign(e,t.statics)}return e}function o(t){t.defaults=t.defaults||{},t.props=s.union(t.props||[],s.keys(t.defaults)),t.refs=t.refs||{},t.parser=t.parser||function(t){return t}}var r,s=n(1),a=n(2),c=n(3).config,u=n(3).modelConstructors,f=n(4),h=n(10),l=n(6),d=n(8);Object.setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e.version=function(){return"v0.4.1"},e.BaseModel=f,e.Collection=n(8),e.State=n(9),e.store=n(5),e.stream=null,e.toStream=function(t){return t.constructor===e.stream?t:e.stream(t)},e.model=function(t,e){if(t=t||{},e=e||{},!t.name)throw new Error("Model name must be set.");var n=u[t.name]=i(t);return n.__init(e),n},e.model.get=function(t){return u[t]};var _={};if(e.config=function(t){t.modelMethods&&l.strictExtend(f.prototype,t.modelMethods),t.constructorMethods&&l.strictExtend(h.prototype,t.constructorMethods),t.collectionMethods&&l.strictExtend(d.prototype,t.collectionMethods),t.stream&&(e.stream=t.stream),t.modelMethods=null,t.constructorMethods=null,t.collectionMethods=null,s.assign(c,t)},e.resetConfig=function(){l.clearObject(c),e.config(_)},e.defaultConfig=function(t,n){s.assign(_,t),n||e.resetConfig()},e.defaultConfig({baseUrl:"",keyId:"id",store:a.request,stream:n(11),redraw:!1,storeBackground:!1,cache:!1,cacheLimit:100,placeholder:null}),r=function(){return e}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)),"undefined"!=typeof window){var p;e.noConflict=function(){return p&&(window.md=p,p=null),window.md},window.__TEST__&&window.mocha&&window.chai&&(e.__TEST__={config:c,BaseModel:f,ModelConstructor:h}),window.md&&(p=window.md),window.md=e}},function(t,e){t.exports=_},function(t,e){t.exports=m},function(t,e){e.config={},e.modelConstructors={}},function(t,e,n){function i(t){this.__options={redraw:!1,parse:!0},this.__collections=[],this.__lid=o.uniqueId("model"),this.__saved=!1,this.__modified=!1,this.__fetching=!1,this.__json={__model:this},o.bindAll(this,o.union(h,s.modelBindMethods)),t&&this.opt(t)}var o=n(1),r=n(2),s=n(3).config,a=n(3).modelConstructors;t.exports=i;var c=n(5),u=n(6),f=n(8),h=[],l={has:1,keys:0,values:0,pick:1,omit:1};i.prototype={opt:function(t,e){o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=!!o.isUndefined(e)||e},id:function(t){return t?this[s.keyId](t,!0):this[s.keyId]()},lid:function(){return this.__lid},url:function(){return s.baseUrl+(this.options.url||"/"+this.options.name.toLowerCase())},attachCollection:function(t){if(!(t instanceof f))throw new Error("Argument `collection` must be instance of Collection.");var e=t.get(this);e&&o.indexOf(this.__collections,t)===-1?this.__collections.push(t):t.add(this)},detachCollection:function(t){if(!(t instanceof f))throw new Error("Argument `collection` must be instance of Collection.");t.get(this)&&t.remove(this),o.indexOf(this.__collections,t)>-1&&o.pull(this.__collections,t)},set:function(t,e,n,i){o.isString(t)?this[t](e,n):this.setObject(t,n,i)},setObject:function(t,e,n){var r=t instanceof i;if(!r&&!o.isPlainObject(t))throw new Error("Argument `obj` must be a model or plain object.");for(var s,a,c=!r&&this.__options.parse?this.options.parser(t):t,u=o.keys(c),f=u.length-1;f>=0;f--)s=u[f],a=c[s],this.__isProp(s)&&o.isFunction(this[s])&&(r&&o.isFunction(a)?this[s](a(),!0,n):this[s](a,!0,n));e||this.__update()},get:function(t){return t?this[t]():this.getCopy()},getJson:function(){return this.__json},getCopy:function(t,e){for(var n,r,s={},a=o.keys(this.__json),c=0;c<a.length;c++)n=a[c],r=this.__json[n],this.__isProp(n)&&(r&&r.__model instanceof i?s[n]=e?r.__model.id():r.__model.getCopy(t,!0):s[n]=r);return t?o.cloneDeep(s):s},save:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return new Promise(function(i,r){var s=n.id()?c.put:c.post;s.call(c,n.url(),n,t).then(function(r){n.set(t&&t.path?o.get(r,t.path):r,null,null,!0),n.__saved=!!n.id(),n.__addToCache(),i(n),o.isFunction(e)&&e(null,r,n)},function(t){r(t),o.isFunction(e)&&e(t)})})},fetch:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return n.__fetching=!0,new Promise(function(i,r){var a=n.__getDataId();a[s.keyId]?c.get(n.url(),a,t).then(function(r){n.set(t&&t.path?o.get(r,t.path):r,null,null,!0),n.__saved=!!n.id(),n.__fetching=!1,n.__addToCache(),i(n),o.isFunction(e)&&e(null,r,n)},function(t){n.__fetching=!1,r(t),o.isFunction(e)&&e(t)}):(n.__fetching=!1,r(new Error("Model must have an id to fetch")),o.isFunction(e)&&e(!0))})},populate:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return new Promise(function(i,r){var c,u=n.options.refs,f=0;o.forEach(u,function(u,h){var l=n.__json[h];if(o.isString(l)||o.isNumber(l)){var d={};d[s.keyId]=l;var _=a[u].create(d);_.isSaved()?n[h](_):(f++,_.fetch(t&&t.fetchOptions&&t.fetchOptions[h]?t.fetchOptions[h]:null,function(t,s,a){f--,t?c=t:n[h](a),f||(c?(r(c),o.isFunction(e)&&e(null,c)):(i(n),o.isFunction(e)&&e(null,n)))}))}}),f||(i(n),o.isFunction(e)&&e(null,n))})},destroy:function(t,e){o.isFunction(t)&&(e=t,t=void 0);var n=this;return new Promise(function(i,r){var a=n.__getDataId();a[s.keyId]?c.destroy(n.url(),a,t).then(function(){n.detach(),i(),o.isFunction(e)&&e(null),n.dispose()},function(t){r(t),o.isFunction(e)&&e(t)}):(r(new Error("Model must have an id to destroy")),o.isFunction(e)&&e(!0))})},remove:function(){this.detach(),this.dispose()},detach:function(){for(var t=o.clone(this.__collections),e=0;e<t.length;e++)t[e].remove(this),t[e]=null},dispose:function(){var t,e=o.keys(this),n=this.options.props;for(this.__json.__model=null,t=0;t<n.length;t++)this[n[t]](null);for(t=0;t<e.length;t++)this[e[t]]=null},isSaved:function(){return this.__saved},isNew:function(){return!this.__saved},isModified:function(){return this.__modified},isDirty:function(){return!this.isSaved()||this.isModified()},isFetching:function(){return this.__fetching},__update:function(){for(var t,e=0;e<this.__collections.length;e++)this.__collections[e].__update(!0)&&(t=!0);(t||this.__options.redraw||this.options.redraw||s.redraw)&&r.redraw()},__isProp:function(t){return o.indexOf(this.options.props,t)>-1},__getDataId:function(){var t={};return t[s.keyId]=this.id(),t},__addToCache:function(){this.constructor.__options.cache&&!this.constructor.__cacheCollection.contains(this)&&this.__saved&&this.constructor.__cacheCollection.add(this)},__gettersetter:function(t,e){function n(){var t;if(arguments.length){t=arguments[0];var n=c.options.refs[e];if(n){var u=a[n];o.isPlainObject(t)?t=u.create(t):(o.isString(t)||o.isNumber(t))&&u.__cacheCollection&&(t=u.__cacheCollection.get(t)||t)}return t instanceof i&&(t.__saved=t.__saved||!(!arguments[2]||!t.id()),t=t.getJson()),r(t),c.__modified=!arguments[2]&&(!arguments[3]&&c.__json[e]!==r._state.value),c.__json[e]=r._state.value,arguments[1]||c.__update(e),t}return t=r(),t&&t.__model instanceof i?t=t.__model:o.isNil(t)&&c.options&&!o.isNil(c.options.defaults[e])&&(t=c.options.defaults[e]),s.placeholder&&c.__fetching&&e!==s.keyId&&o.isString(t)?s.placeholder:t}var r=s.stream(),c=this;return n.stream=r,n.call(this,t,!0,void 0,!0),n}},u.addMethods(i.prototype,o,l,"__json")},function(t,e,n){function i(t,e){u.storeConfigXHR&&u.storeConfigXHR(t,e),t.setRequestHeader("Content-Type","application/json")}function o(t,e){return u.storeExtract?u.storeExtract(t,e):t.responseText.length?s(t.responseText):null}function r(t){return a(t),u.storeSerializer?u.storeSerializer(t):JSON.stringify(t)}function s(t){if(u.storeDeserializer)return u.storeDeserializer(t);try{return JSON.parse(t)}catch(e){return t}}function a(t){var e;for(var n in t)e=t[n],c.isObject(e)&&(t[n]=e[u.keyId]||e)}var c=n(1),u=n(3).config,f=n(4);t.exports=c.create(null,{request:function(t,e,n,a){var h={method:e||"GET",url:t,data:(n instanceof f?n.getCopy():n)||{},background:!!u.storeBackground,serialize:r,deserialize:s,config:i,extract:o};return a&&(h=c.defaultsDeep(a,h)),u.storeConfigOptions&&u.storeConfigOptions(h),u.store(h)},get:function(t,e,n){return this.request(t,"GET",e,n)},post:function(t,e,n){return this.request(t,"POST",e,n)},put:function(t,e,n){return this.request(t,"PUT",e,n)},destroy:function(t,e,n){return this.request(t,"DELETE",e,n)}})},function(t,e,n){(function(e){function i(t,e){return function(n,i,o,r){return t(n?n[e]||n:n,i?i[e]||i:i,o,r)}}function o(t,e){for(var n,o=t.length-1;o>=0;o--)n=t[o],a.isFunction(n)?t[o]=i(n,e):n instanceof u&&(t[o]=n.__json);return t}function r(t,e,n){if(t===e)return t;if(a.isArray(t)){for(var i,o=t.length-1;o>=0;o--)i=t[o],i&&i[n]&&(t[o]=i[n]);return t}return t?t[n]||t:t}function s(){return f&&window.setImmediate?window.setImmediate:"object"==typeof e&&"function"==typeof e.nextTick?e.nextTick:function(t){setTimeout(t,0)}}var a=n(1),c=Array.prototype.slice,u=n(4),f="undefined"!=typeof window;t.exports=a.create(null,{isBrowser:f,nextTick:s(),clearObject:function(t){for(var e in t)delete t[e]},hasValueOfType:function(t,e){for(var n=a.keys(t),i=0;i<n.length;i++)if(t[n[i]]instanceof e)return!0;return!1},isConflictExtend:function(t,e){for(var n=a.keys(e),i=0;i<n.length;i++)if(a.hasIn(t,n[i]))return n[i];return!1},strictExtend:function(t,e){var n=this.isConflictExtend(t,e);if(n)throw new Error("`"+n+"` method / property is not allowed.");a.extend(t,e)},addMethods:function(t,e,n,s,f){a.each(n,function(n,h){if(e[h])switch(n){case 0:t[h]=function(){return r(e[h](this[s]),this[s],f)};break;case 1:t[h]=function(t){return a.isFunction(t)?t=i(t,f):t instanceof u&&(t=t.__json),r(e[h](this[s],t),this[s],f)};break;case 2:t[h]=function(t,n){return a.isFunction(t)?t=i(t,f):t instanceof u&&(t=t.__json),a.isFunction(n)?n=i(n,f):n instanceof u&&(n=n.__json),r(e[h](this[s],t,n),this[s],f)};break;default:t[h]=function(){var t=o(c.call(arguments),f);return t.unshift(this[s]),r(e[h].apply(e,t),this[s],f)}}})}})}).call(e,n(7))},function(t,e){function n(t){if(c===setTimeout)return setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function i(t){if(u===clearTimeout)return clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}function o(){d&&h&&(d=!1,h.length?l=h.concat(l):_=-1,l.length&&r())}function r(){if(!d){var t=n(o);d=!0;for(var e=l.length;e;){for(h=l,l=[];++_<e;)h&&h[_].run();_=-1,e=l.length}h=null,d=!1,i(t)}}function s(t,e){this.fun=t,this.array=e}function a(){}var c,u,f=t.exports={};!function(){try{c=setTimeout}catch(t){c=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(t){u=function(){throw new Error("clearTimeout is not defined")}}}();var h,l=[],d=!1,_=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new s(t,e)),1!==l.length||d||n(r)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=a,f.addListener=a,f.once=a,f.off=a,f.removeListener=a,f.removeAllListeners=a,f.emit=a,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){function i(t){this.models=[],this.__options={redraw:!1,_cache:!1},t&&this.opt(t);var e=this.__options.state;e&&(e instanceof u||(e=new u(e)),this.__state=e),o.bindAll(this,o.union(f,a.collectionBindMethods)),this.__fetching=!1}var o=n(1),r=n(2),s=n(6),a=n(3).config,c=n(4),u=n(9);t.exports=i,i.prototype={opt:function(t,e){o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=!!o.isUndefined(e)||e},add:function(t,e,n){if(!(t instanceof c)||this.__options.model&&!(t instanceof this.__options.model))throw new Error("Must be a model or an instance of set model");var i=this.get(t),o=!1;return i?i.set(t):(e?this.models.unshift(t.getJson()):this.models.push(t.getJson()),t.attachCollection(this),this.__state&&this.__state.set(t.lid()),o=!0),o&&!n&&this.__update(),o},addAll:function(t,e,n){o.isArray(t)||(t=[t]);for(var i=!1,r=0;r<t.length;r++)this.add(t[r],e,!0)&&(i=!0);return i&&!n&&this.__update(),i},create:function(t,e){o.isArray(t)||(t=[t]);for(var n,i,r=[],s=0;s<t.length;s++){if(i=t[s],!o.isPlainObject(i))throw new Error("Plain object required");n=this.get(i),n?n.set(i,!0):this.__options.model&&r.push(this.__options.model.create(i,e))}return this.addAll(r),r},get:function(t){var e;if(t instanceof c)return this.contains(t)?t:void 0;if(o.isObject(t)){if(!t[a.keyId])return this.find(t)||void 0;t=t[a.keyId]}return e=this.find([a.keyId,t]),e||void 0},getAll:function(t,e){o.isArray(t)||(t=[t]);for(var n,i=[],r=0;r<t.length;r++)n=this.get(t[r]),(n||e)&&i.push(n);return i},remove:function(t,e){o.isArray(t)||(t=[t]);var n,i,r,s=this.size(),u=[];if(s){for(r=0;r<t.length;r++){if(i=t[r],!i)throw new Error("Can't remove from collection. Argument must be set.");i instanceof c?u.push.apply(u,o.remove(this.models,function(t){return o.eq(t,i.getJson())})):o.isObjectLike(i)?u.push.apply(u,o.remove(this.models,function(t){return o.isMatch(t,i)})):u.push.apply(u,o.remove(this.models,function(t){return n={},n[a.keyId]=i,o.isMatch(t,n)}))}var f;for(r=0;r<u.length;r++)f=u[r].__model,f.detachCollection(this),this.__state&&this.__state.remove(f.lid());return s!==this.size()&&(e||this.__update(),!0)}},push:function(t,e){return this.addAll(t,e)},unshift:function(t,e){return this.addAll(t,!0,e)},shift:function(t){var e=this.first();return this.remove(e,t),e},pop:function(t){var e=this.last();return this.remove(e,t),e},clear:function(t){return this.remove(this.toArray(),t)},pluck:function(t){for(var e=[],n="id"===t,i=0,o=this.models;i<o.length;i++)e.push(n?o[i].__model[t]():o[i][t]);return e},dispose:function(){var t=o.keys(this),e=0;for(this.__options.model&&(this.__options.model=null),this.__state&&this.__state.dispose();e<t.length;e++)this[t[e]]=null},destroy:function(){this.clear(!0),this.dispose()},stateOf:function(t){if(this.__state){var e=this.get(t);if(e)return this.__state.get(e.lid())}},contains:function(t){if(t instanceof c)return this.indexOf(t.getJson())>-1;if(o.isObject(t)){if(!t[a.keyId])return this.findIndex(t)>-1;t=t[a.keyId]}return this.findIndex([a.keyId,t])>-1},sort:function(t,e){o.isArray(t)||(t=[t]);var n;e?(o.isArray(e)||(e=[e]),n=this.orderBy(t,e)):n=this.orderBy(t),this.__replaceModels(n)},sortByOrder:function(t,e){e||(e=a.keyId),this.__replaceModels(this.sortBy([function(n){return t.indexOf(o.get(n,e))}]))},randomize:function(){this.__replaceModels(this.shuffle())},hasModel:function(){return!!this.__options.model},model:function(){return this.__options.model},url:function(t){var e=t?"":a.baseUrl;return this.__options.url?e+=this.__options.url:this.hasModel()&&(e+=this.model().modelOptions.url||"/"+this.model().modelOptions.name.toLowerCase()),e},fetch:function(t,e,n){o.isFunction(e)&&(n=e,e=void 0);var i=this;return i.__fetching=!0,new Promise(function(r,s){i.hasModel()?(e=e||{},i.model().pull(i.url(),t,e,function(t,a,c){i.__fetching=!1,t?(s(t),o.isFunction(n)&&n(t)):(e.clear&&i.clear(!0),i.addAll(c),r(c),o.isFunction(n)&&n(null,a,c))})):(i.__fetching=!1,s(new Error("Collection must have a model to perform fetch")),o.isFunction(n)&&n(!0))})},isFetching:function(){return this.__fetching},__replaceModels:function(t){for(var e=t.length-1;e>=0;e--)this.models[e]=t[e].__json},__update:function(t){if(!this.__options._cache&&(this.__options.redraw||a.redraw))return t||r.redraw(),!0}};var f=[],h={difference:1,every:1,find:1,findIndex:1,findLastIndex:1,filter:1,first:0,forEach:1,indexOf:2,initial:0,invoke:3,groupBy:1,last:0,lastIndexOf:2,map:1,maxBy:1,minBy:1,nth:1,orderBy:2,reduce:-1,reject:1,reverse:0,sample:0,shuffle:0,size:0,slice:1,sortBy:1,some:1,transform:2,toArray:0,without:1};s.addMethods(i.prototype,o,h,"models","__model")},function(t,e,n){function i(){var t={};for(var e in this)s.indexOf(u,e)===-1&&(t[e]=this[e]());return t}function o(t,e,n,i){var o,r=n&&n.store?n.store:a.stream;for(var c in t){if(s.indexOf(u,c)>-1)throw new Error("State key `"+c+"` is not allowed.");o=t[c],e[c]=s.isFunction(o)?o:r(o,c,i,n)}return e}function r(t,e){if(s.isArray(t)){this.signature=s.invert(t);for(var n in this.signature)this.signature[n]=void 0}else this.signature=t;this._options=e,this.map={}}var s=n(1),a=n(3).config,c="__key__",u=["factory","toJson","_options"];t.exports=r,r.create=function(t,e){return o(t,{toJson:i},e)},r.assign=function(t,e,n){o(e,t,n)},r.prototype={set:function(t){return t||(t=c),this.map[t]||(this.map[t]=o(this.signature,{factory:a.stream(this),toJson:i},this._options,t)),this.map[t]},get:function(t){return t||(t=c),this.map[t]||this.set(t),this.map[t]},remove:function(t){if(t||(t=c),this.map[t]){var e,n=s.keys(this.map[t]);for(e=0;e<n.length;e++)this.map[t][n[e]]=null;delete this.map[t]}},dispose:function(){var t,e,n=s.keys(this),i=s.keys(this.map),o=s.keys(this.signature);for(t=0;t<i.length;t++){for(e=0;e<o.length;e++)this.map[i[t]][o[e]]=null;this.map[i[t]]=null}for(t=0;t<n.length;t++)this[n[t]]=null}}},function(t,e,n){function i(){}var o=n(1),r=n(5),s=n(3).config,a=n(8);t.exports=i,i.prototype={__init:function(t){this.__options||(this.__options={redraw:!1,cache:s.cache===!0},t&&this.opt(t),this.__options.cache&&(this.__cacheCollection=new a({model:this,_cache:!0}),this.__options.cacheLimit||(this.__options.cacheLimit=s.cacheLimit)))},__flagSaved:function(t){for(var e=0;e<t.length;e++)t[e].__saved=!0},opt:function(t,e){this.__options||this.__init(),o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=!!o.isUndefined(e)||e},create:function(t,e){if(null==t&&(t={}),!o.isPlainObject(t))throw new Error("Plain object required");var n;return this.modelOptions.parser&&(t=this.modelOptions.parser(t)),this.__options.cache&&t[s.keyId]?(n=this.__cacheCollection.get(t),n||(n=new this(t,e),this.__cacheCollection.add(n),this.__cacheCollection.size()>this.__options.cacheLimit&&this.__cacheCollection.shift())):n=new this(t,e),n},createCollection:function(t){return new a(o.assign({model:this},t))},createModels:function(t,e){o.isArray(t)||(t=[t]);for(var n=[],i=0;i<t.length;i++)n[i]=this.create(t[i],e);return n},pull:function(t,e,n,i){o.isFunction(e)?(i=e,e=void 0):o.isFunction(n)&&(i=n,n=e,e=void 0);var s=this;return new Promise(function(a,c){r.get(t,e,n).then(function(t){var e=s.createModels(n&&n.path?o.get(t,n.path):t,n);s.__flagSaved(e),a(e),o.isFunction(i)&&i(null,t,e)},function(t){c(t),o.isFunction(i)&&i(t)})})}}},function(t,e,n){t.exports=n(12)},function(t,e,n){(function(t){"use strict";function e(){function t(){return arguments.length>0&&arguments[0]!==O&&i(t,arguments[0]),t._state.value}return n(t),arguments.length>0&&arguments[0]!==O&&i(t,arguments[0]),t}function n(t){t.constructor=e,t._state={id:w++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0},t.map=t["fantasy-land/map"]=h,t["fantasy-land/ap"]=l,t["fantasy-land/of"]=e,t.valueOf=d,t.toJSON=_,t.toString=d,Object.defineProperties(t,{end:{get:function(){if(!t._state.endStream){var n=e();n.map(function(e){return e===!0&&(f(t),f(n)),e}),t._state.endStream=n}return t._state.endStream}}})}function i(t,e){o(t,e);for(var n in t._state.deps)r(t._state.deps[n],!1);s(t)}function o(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function r(t,e){var n=t._state,i=n.parents;if(i.length>0&&i.every(m)&&(e||i.some(v))){var r=t._state.derive();if(r===O)return!1;o(t,r)}}function s(t){t._state.changed=!1;for(var e in t._state.deps)t._state.deps[e]._state.changed=!1}function a(t,n){if(!n.every(p))throw new Error("Ensure that each item passed to m.prop.combine/m.prop.merge is a stream");return c(e(),n,function(){return t.apply(this,n.concat([n.filter(v)]))})}function c(t,e,n){var i=t._state;return i.derive=n,i.parents=e.filter(g),u(t,i.parents),r(t,!0),t}function u(t,e){for(var n=0;n<e.length;n++)e[n]._state.deps[t._state.id]=t,u(t,e[n]._state.parents)}function f(t){for(var e=0;e<t._state.parents.length;e++){var n=t._state.parents[e];delete n._state.deps[t._state.id]}for(var i in t._state.deps){var o=t._state.deps[i],r=o._state.parents.indexOf(t);r>-1&&o._state.parents.splice(r,1)}t._state.state=2,t._state.deps={}}function h(t){return a(function(e){return t(e())},[this])}function l(t){return a(function(t,e){return t()(e())},[t,this])}function d(){return this._state.value}function _(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function p(t){return t._state}function m(t){return 1===t._state.state}function v(t){return t._state.changed}function g(t){return 2!==t._state.state}function y(t){return a(function(){return t.map(function(t){return t()})},t)}var w=0,O={};e["fantasy-land/of"]=e,e.merge=y,e.combine=a,e.HALT=O,t.exports=e}).call(e,n(13)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);
>>>>>>> devel
