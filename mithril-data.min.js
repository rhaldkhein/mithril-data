/**
 * mithril-data v0.4.8
 * A rich data model library for Mithril javascript framework.
 * https://github.com/rhaldkhein/mithril-data
 * (c) 2018 Kevin Villanueva
 * License: MIT
 */
!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){function i(t){function n(n,e){u.call(this,e);var i=(this.__options.parse?this.options.parser(n):n)||{},o=t.props;-1===s.indexOf(o,a.keyId)&&o.push(a.keyId);for(var r,c=0;c<o.length;c++){if(r=o[c],!this.__isProp(r)||"id"===r&&r!==a.keyId)return;if(s.hasIn(this,r)&&"id"!==r)throw new Error("`"+r+"` prop is not allowed.");this[r]=this.__gettersetter(s.isUndefined(i[r])?t.defaults[r]:i[r],r)}}!function(t){t.defaults=t.defaults||{},t.props=s.union(t.props||[],s.keys(t.defaults)),t.refs=t.refs||{},t.parser=t.parser||function(t){return t}}(t);var e=l.isConflictExtend(u.prototype,t.methods);if(e)throw new Error("`"+e+"` method is not allowed.");if(n.modelOptions=t,n.prototype=s.create(u.prototype,s.assign(t.methods||{},{constructor:n,options:t})),Object.setPrototypeOf(n,h.prototype),!s.isEmpty(t.statics)){var i=l.isConflictExtend(n,t.statics);if(i)throw new Error("`"+i+"` method is not allowed for statics.");s.assign(n,t.statics)}return n}var o,s=e(1),r=e(2),a=e(3).config,c=e(3).modelConstructors,u=e(4),h=e(10),l=e(6),f=e(8);Object.setPrototypeOf=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},n.version=function(){return"v0.4.8"},n.BaseModel=u,n.Collection=e(8),n.State=e(9),n.store=e(5),n.stream=null,n.toStream=function(t){return t&&t.constructor===n.stream?t:n.stream(t)},n.model=function(t,n){if(t=t||{},n=n||{},!t.name)throw new Error("Model name must be set.");var e=c[t.name]=i(t);return e.__init(n),e},n.model.get=function(t){return c[t]};var d={};if(n.config=function(t){t.modelMethods&&l.strictExtend(u.prototype,t.modelMethods),t.constructorMethods&&l.strictExtend(h.prototype,t.constructorMethods),t.collectionMethods&&l.strictExtend(f.prototype,t.collectionMethods),t.stream&&(n.stream=t.stream),t.modelMethods=null,t.constructorMethods=null,t.collectionMethods=null,s.assign(a,t)},n.resetConfig=function(){l.clearObject(a),n.config(d)},n.defaultConfig=function(t,e){s.assign(d,t),e||n.resetConfig()},n.defaultConfig({baseUrl:"",keyId:"id",store:r.request,stream:e(11),redraw:!1,storeBackground:!1,cache:!1,cacheLimit:100,placeholder:null}),void 0===(o=function(){return n}.call(n,e,n,t))||(t.exports=o),"undefined"!=typeof window){var _;n.noConflict=function(){return _&&(window.md=_,_=null),window.md},window.__TEST__&&window.mocha&&window.chai&&(n.__TEST__={config:a,BaseModel:u,ModelConstructor:h}),window.md&&(_=window.md),window.md=n}},function(t,n){t.exports=_},function(t,n){t.exports=m},function(t,n){n.config={},n.modelConstructors={}},function(t,n,e){function i(t){this.__options={redraw:!1,parse:!0},this.__collections=[],this.__lid=o.uniqueId("model"),this.__saved=!1,this.__modified=!1,this.__working=0,this.__json={__model:this},o.bindAll(this,o.union(l,r.modelBindMethods)),t&&this.opt(t)}var o=e(1),s=e(2),r=e(3).config,a=e(3).modelConstructors;t.exports=i;var c=e(5),u=e(6),h=e(8),l=[];i.prototype={opt:function(t,n){o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=!!o.isUndefined(n)||n},id:function(t){return t?this[r.keyId](t,!0):this[r.keyId]()},lid:function(){return this.__lid},url:function(){return r.baseUrl+(this.options.url||"/"+this.options.name.toLowerCase())},attachCollection:function(t){if(!(t instanceof h))throw new Error("Argument `collection` must be instance of Collection.");t.get(this)&&-1===o.indexOf(this.__collections,t)?this.__collections.push(t):t.add(this)},detachCollection:function(t){if(!(t instanceof h))throw new Error("Argument `collection` must be instance of Collection.");t.get(this)&&t.remove(this),o.indexOf(this.__collections,t)>-1&&o.pull(this.__collections,t)},set:function(t,n,e,i){o.isString(t)?this[t](n,e):this.setObject(t,e,i)},setObject:function(t,n,e){var s=t instanceof i;if(!s&&!o.isPlainObject(t))throw new Error("Argument `obj` must be a model or plain object.");for(var r,a,c=!s&&this.__options.parse?this.options.parser(t):t,u=o.keys(c),h=u.length-1;h>=0;h--)a=c[r=u[h]],this.__isProp(r)&&o.isFunction(this[r])&&(s&&o.isFunction(a)?this[r](a(),!0,e):this[r](a,!0,e));n||this.__update()},get:function(t){return t?this[t]():this.getCopy()},getJson:function(){return this.__json},getCopy:function(t,n){for(var e,s,r={},a=o.keys(this.__json),c=0;c<a.length;c++)e=a[c],s=this.__json[e],this.__isProp(e)&&(s&&s.__model instanceof i?r[e]=n?s.__model.id():s.__model.getCopy(t,!0):r[e]=s);return t?o.cloneDeep(r):r},save:function(t,n){o.isFunction(t)&&(n=t,t=void 0);var e=this,i=this.id()?c.put:c.post;return this.__working=2,i.call(c,this.url(),this,t).then(function(i){return e.set(t&&t.path?o.get(i,t.path):i,null,null,!0),e.__saved=!!e.id(),e.__addToCache(),e.__working=0,o.isFunction(n)&&n(null,i,e),e},function(t){throw e.__working=0,o.isFunction(n)&&n(t),t})},fetch:function(t,n){o.isFunction(t)&&(n=t,t=void 0),this.__working=1;var e=this,i=this.__getDataId(),s=o.trim(i[r.keyId]);if(s&&"undefined"!=s&&"null"!=s)return c.get(this.url(),i,t).then(function(i){return i?(e.set(t&&t.path?o.get(i,t.path):i,null,null,!0),e.__saved=!!e.id()):e.__saved=!1,e.__working=0,e.__addToCache(),o.isFunction(n)&&n(null,i,e),e},function(t){throw e.__working=0,o.isFunction(n)&&n(t),t});this.__working=0;var a=new Error("Model must have an id to fetch");return o.isFunction(n)&&n(a),Promise.reject(a)},populate:function(t,n){o.isFunction(t)&&(n=t,t=void 0);var e=this;return new Promise(function(i,s){var c,u=e.options.refs,h=0;o.forEach(u,function(u,l){var f=e.__json[l];if(o.isString(f)||o.isNumber(f)){var d={};d[r.keyId]=f;var _=a[u].create(d);_.isSaved()?e[l](_):(h++,_.fetch(t&&t.fetchOptions&&t.fetchOptions[l]?t.fetchOptions[l]:null,function(t,r,a){h--,t?c=t:e[l](a),h||(c?(s(c),o.isFunction(n)&&n(null,c)):(i(e),o.isFunction(n)&&n(null,e)))}).catch(s))}}),h||(i(e),o.isFunction(n)&&n(null,e))})},destroy:function(t,n){o.isFunction(t)&&(n=t,t=void 0);var e=this,i=this.__getDataId(),s=o.trim(i[r.keyId]);if(this.__working=3,s&&"undefined"!=s&&"null"!=s)return c.destroy(this.url(),i,t).then(function(){e.detach(),e.__working=0,o.isFunction(n)&&n(null),e.dispose()},function(t){throw e.__working=0,o.isFunction(n)&&n(t),t});var a=new Error("Model must have an id to destroy");return this.__working=0,o.isFunction(n)&&n(a),Promise.reject(a)},remove:function(){this.detach(),this.dispose()},detach:function(){for(var t=o.clone(this.__collections),n=0;n<t.length;n++)t[n].remove(this),t[n]=null},dispose:function(){var t,n=o.keys(this),e=this.options.props;for(this.__json.__model=null,t=0;t<e.length;t++)this[e[t]](null);for(t=0;t<n.length;t++)this[n[t]]=null},isSaved:function(){return this.__saved},isNew:function(){return!this.__saved},isModified:function(){return this.__modified},isDirty:function(){return!this.isSaved()||this.isModified()},isWorking:function(){return this.__working>0},isFetching:function(){return 1===this.__working},isSaving:function(){return 2===this.__working},isDestroying:function(){return 3===this.__working},__update:function(){for(var t,n=0;n<this.__collections.length;n++)this.__collections[n].__update(!0)&&(t=!0);(t||this.__options.redraw||this.options.redraw||r.redraw)&&s.redraw()},__isProp:function(t){return o.indexOf(this.options.props,t)>-1},__getDataId:function(){var t={};return t[r.keyId]=this.id(),t},__addToCache:function(){this.constructor.__options.cache&&!this.constructor.__cacheCollection.contains(this)&&this.__saved&&this.constructor.__cacheCollection.add(this)},__gettersetter:function(t,n){function e(){var t,e;if(arguments.length){t=arguments[0];var u=c.options.refs[n];if(u){var h=a[u];o.isPlainObject(t)?t=h.create(t):(o.isString(t)||o.isNumber(t))&&h.__cacheCollection&&(t=h.__cacheCollection.get(t)||t)}return t instanceof i&&(t.__saved=t.__saved||!(!arguments[2]||!t.id()),t=t.getJson()),s(t),c.__modified=!arguments[2]&&(!arguments[3]&&c.__json[n]!==s._state.value),c.__json[n]=s._state.value,arguments[1]||c.__update(n),t}return t=s(),e=c.options&&c.options.defaults[n],o.isNil(t)?o.isNil(e)||(t=e):t.__model instanceof i?t=t.__model:o.isPlainObject(t)&&e instanceof i&&(s(null),t=e),r.placeholder&&c.isFetching()&&n!==r.keyId&&o.indexOf(c.options.placehold,n)>-1?r.placeholder:t}var s=r.stream(),c=this;return e.stream=s,e.call(this,t,!0,void 0,!0),e}},u.addMethods(i.prototype,o,{has:1,keys:0,values:0,pick:1,omit:1},"__json")},function(t,n,e){function i(t,n){c.storeConfigXHR&&c.storeConfigXHR(t,n),t.setRequestHeader("Content-Type","application/json")}function o(t,n){return c.storeExtract?c.storeExtract(t,n):t.responseText.length?r(t.responseText):null}function s(t){return function(t){var n;for(var e in t)n=t[e],a.isObject(n)&&(t[e]=n[c.keyId]||n)}(t),c.storeSerializer?c.storeSerializer(t):JSON.stringify(t)}function r(t){if(c.storeDeserializer)return c.storeDeserializer(t);try{return JSON.parse(t)}catch(n){return t}}var a=e(1),c=e(3).config,u=e(4);t.exports=a.create(null,{request:function(t,n,e,h){var l={method:n||"GET",url:t,data:(e instanceof u?e.getCopy():e)||{},background:!!c.storeBackground,serialize:s,deserialize:r,config:i,extract:o};return h&&(l=a.defaultsDeep(h,l)),c.storeConfigOptions&&c.storeConfigOptions(l),c.store(l)},get:function(t,n,e){return this.request(t,"GET",n,e)},post:function(t,n,e){return this.request(t,"POST",n,e)},put:function(t,n,e){return this.request(t,"PUT",n,e)},destroy:function(t,n,e){return this.request(t,"DELETE",n,e)}})},function(t,n,e){(function(n){function i(t,n){return function(e,i,o,s){return t(e?e[n]||e:e,i?i[n]||i:i,o,s)}}function o(t,n,e){if(t===n)return t;if(s.isArray(t)){for(var i,o=t.length-1;o>=0;o--)(i=t[o])&&i[e]&&(t[o]=i[e]);return t}return t?t[e]||t:t}var s=e(1),r=Array.prototype.slice,a=e(4),c="undefined"!=typeof window;t.exports=s.create(null,{isBrowser:c,nextTick:c&&window.setImmediate?window.setImmediate:"object"==typeof n&&"function"==typeof n.nextTick?n.nextTick:function(t){setTimeout(t,0)},clearObject:function(t){for(var n in t)delete t[n]},hasValueOfType:function(t,n){for(var e=s.keys(t),i=0;i<e.length;i++)if(t[e[i]]instanceof n)return!0;return!1},isConflictExtend:function(t,n){for(var e=s.keys(n),i=0;i<e.length;i++)if(s.hasIn(t,e[i]))return e[i];return!1},strictExtend:function(t,n){var e=this.isConflictExtend(t,n);if(e)throw new Error("`"+e+"` method / property is not allowed.");s.extend(t,n)},addMethods:function(t,n,e,c,u){s.each(e,function(e,h){if(n[h])switch(e){case 0:t[h]=function(){return o(n[h](this[c]),this[c],u)};break;case 1:t[h]=function(t){return s.isFunction(t)?t=i(t,u):t instanceof a&&(t=t.__json),o(n[h](this[c],t),this[c],u)};break;case 2:t[h]=function(t,e){return s.isFunction(t)?t=i(t,u):t instanceof a&&(t=t.__json),s.isFunction(e)?e=i(e,u):e instanceof a&&(e=e.__json),o(n[h](this[c],t,e),this[c],u)};break;default:t[h]=function(){var t=function(t,n){for(var e,o=t.length-1;o>=0;o--)e=t[o],s.isFunction(e)?t[o]=i(e,n):e instanceof a&&(t[o]=e.__json);return t}(r.call(arguments),u);return t.unshift(this[c]),o(n[h].apply(n,t),this[c],u)}}})}})}).call(n,e(7))},function(t,n){function e(){u&&r&&(u=!1,r.length?c=r.concat(c):h=-1,c.length&&i())}function i(){if(!u){var t=setTimeout(e);u=!0;for(var n=c.length;n;){for(r=c,c=[];++h<n;)r&&r[h].run();h=-1,n=c.length}r=null,u=!1,clearTimeout(t)}}function o(t,n){this.fun=t,this.array=n}function s(){}var r,a=t.exports={},c=[],u=!1,h=-1;a.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new o(t,n)),1!==c.length||u||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,n,e){function i(t){this.models=[],this.__options={redraw:!1,_cache:!1},t&&this.opt(t);var n=this.__options.state;n&&(n instanceof u||(n=new u(n)),this.__state=n),o.bindAll(this,o.union(h,a.collectionBindMethods)),this.__working=!1}var o=e(1),s=e(2),r=e(6),a=e(3).config,c=e(4),u=e(9);t.exports=i,i.prototype={opt:function(t,n){o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=!!o.isUndefined(n)||n},add:function(t,n,e){if(!(t instanceof c)||this.__options.model&&!(t instanceof this.__options.model))throw new Error("Must be a model or an instance of set model");var i=this.get(t),o=!1;return i?i.set(t):(n?this.models.unshift(t.getJson()):this.models.push(t.getJson()),t.attachCollection(this),this.__state&&this.__state.set(t.lid()),o=!0),o&&!e&&this.__update(),o},addAll:function(t,n,e){o.isArray(t)||(t=[t]);for(var i=!1,s=0;s<t.length;s++)this.add(t[s],n,!0)&&(i=!0);return i&&!e&&this.__update(),i},create:function(t,n){o.isArray(t)||(t=[t]);for(var e,i,s=[],r=0;r<t.length;r++){if(i=t[r],!o.isPlainObject(i))throw new Error("Plain object required");(e=this.get(i))?e.set(i,!0):this.__options.model&&s.push(this.__options.model.create(i,n))}return this.addAll(s),s},get:function(t){if(t instanceof c)return this.contains(t)?t:void 0;if(o.isObject(t)){if(!t[a.keyId])return this.find(t)||void 0;t=t[a.keyId]}return this.find([a.keyId,t])||void 0},getAll:function(t,n){o.isArray(t)||(t=[t]);for(var e,i=[],s=0;s<t.length;s++)((e=this.get(t[s]))||n)&&i.push(e);return i},remove:function(t,n){o.isArray(t)||(t=[t]);var e,i,s,r=this.size(),u=[];if(r){for(s=0;s<t.length;s++){if(!(i=t[s]))throw new Error("Can't remove from collection. Argument must be set.");i instanceof c?u.push.apply(u,o.remove(this.models,function(t){return o.eq(t,i.getJson())})):o.isObjectLike(i)?u.push.apply(u,o.remove(this.models,function(t){return o.isMatch(t,i)})):u.push.apply(u,o.remove(this.models,function(t){return e={},e[a.keyId]=i,o.isMatch(t,e)}))}var h;for(s=0;s<u.length;s++)(h=u[s].__model).detachCollection(this),this.__state&&this.__state.remove(h.lid());return r!==this.size()&&(n||this.__update(),!0)}},push:function(t,n){return this.addAll(t,n)},unshift:function(t,n){return this.addAll(t,!0,n)},shift:function(t){var n=this.first();return this.remove(n,t),n},pop:function(t){var n=this.last();return this.remove(n,t),n},clear:function(t){var n,e,i=this.toArray(),o=i.length;for(n=0;n<o;n++)(e=i[n]).detachCollection(this),this.__state&&this.__state.remove(e.lid());return o!==this.size()&&(t||this.__update(),!0)},pluck:function(t,n){for(var e=[],i="id"===t,o=0,s=this.models;o<s.length;o++)n&&!n(s[o].__model)||e.push(i?s[o].__model[t]():s[o][t]);return e},dispose:function(){var t=o.keys(this),n=0;for(this.__options.model&&(this.__options.model=null),this.__state&&this.__state.dispose();n<t.length;n++)this[t[n]]=null},destroy:function(){this.clear(!0),this.dispose()},stateOf:function(t){if(this.__state){var n=this.get(t);if(n)return this.__state.get(n.lid())}},contains:function(t){if(t instanceof c)return this.indexOf(t.getJson())>-1;if(o.isObject(t)){if(!t[a.keyId])return this.findIndex(t)>-1;t=t[a.keyId]}return this.findIndex([a.keyId,t])>-1},sort:function(t,n){o.isArray(t)||(t=[t]);var e;n?(o.isArray(n)||(n=[n]),e=this.orderBy(t,n)):e=this.orderBy(t),this.__replaceModels(e)},sortByOrder:function(t,n){n||(n=a.keyId),this.__replaceModels(this.sortBy([function(e){return t.indexOf(o.get(e,n))}]))},randomize:function(){this.__replaceModels(this.shuffle())},hasModel:function(){return!!this.__options.model},model:function(){return this.__options.model},url:function(t){var n=t?"":a.baseUrl;return this.__options.url?n+=this.__options.url:this.hasModel()&&(n+=this.model().modelOptions.url||"/"+this.model().modelOptions.name.toLowerCase()),n},fetch:function(t,n,e){o.isFunction(n)&&(e=n,n=void 0);var i=this;if(i.__working=!0,i.hasModel())return n=n||{},i.model().pull(i.url(),t,n,function(t,s,r){i.__working=!1,t?o.isFunction(e)&&e(t):(n.clear&&i.clear(!0),i.addAll(r),o.isFunction(e)&&e(null,s,r))});i.__working=!1;var s=new Error("Collection must have a model to perform fetch");return o.isFunction(e)&&e(s),Promise.reject(s)},isWorking:function(){return this.__working},isFetching:function(){return this.isWorking()},__replaceModels:function(t){for(var n=t.length-1;n>=0;n--)this.models[n]=t[n].__json},__update:function(t){if(!this.__options._cache&&(this.__options.redraw||a.redraw))return t||s.redraw(),!0}};var h=[];r.addMethods(i.prototype,o,{difference:1,every:1,find:1,findIndex:1,findLastIndex:1,filter:1,first:0,forEach:1,indexOf:2,initial:0,invoke:3,groupBy:1,last:0,lastIndexOf:2,map:1,maxBy:1,minBy:1,nth:1,orderBy:2,partition:1,reduce:-1,reject:1,reverse:0,sample:0,shuffle:0,size:0,slice:1,sortBy:1,some:1,transform:2,toArray:0,without:1},"models","__model")},function(t,n,e){function i(){var t={};for(var n in this)-1===r.indexOf(c,n)&&(t[n]=this[n]());return t}function o(t,n,e,i){var o,s=e&&e.store?e.store:a.stream;for(var u in t){if(r.indexOf(c,u)>-1)throw new Error("State key `"+u+"` is not allowed.");o=t[u],n[u]=r.isFunction(o)?o:s(o,u,i,e)}return n}function s(t,n){if(r.isArray(t)){this.signature=r.invert(t);for(var e in this.signature)this.signature[e]=void 0}else this.signature=t;this._options=n,this.map={}}var r=e(1),a=e(3).config,c=["factory","toJson","_options"];t.exports=s,s.create=function(t,n){return o(t,{toJson:i},n)},s.assign=function(t,n,e){o(n,t,e)},s.prototype={set:function(t){return t||(t="__key__"),this.map[t]||(this.map[t]=o(this.signature,{factory:a.stream(this),toJson:i},this._options,t)),this.map[t]},get:function(t){return t||(t="__key__"),this.map[t]||this.set(t),this.map[t]},remove:function(t){if(t||(t="__key__"),this.map[t]){var n,e=r.keys(this.map[t]);for(n=0;n<e.length;n++)this.map[t][e[n]]=null;delete this.map[t]}},dispose:function(){var t,n,e=r.keys(this),i=r.keys(this.map),o=r.keys(this.signature);for(t=0;t<i.length;t++){for(n=0;n<o.length;n++)this.map[i[t]][o[n]]=null;this.map[i[t]]=null}for(t=0;t<e.length;t++)this[e[t]]=null}}},function(t,n,e){function i(){}var o=e(1),s=e(5),r=e(3).config,a=e(8);t.exports=i,i.prototype={__init:function(t){this.__options||(this.__options={redraw:!1,cache:!0===r.cache},t&&this.opt(t),this.__options.cache&&(this.__cacheCollection=new a({model:this,_cache:!0}),this.__options.cacheLimit||(this.__options.cacheLimit=r.cacheLimit)))},__flagSaved:function(t){for(var n=0;n<t.length;n++)t[n].__saved=!0},opt:function(t,n){this.__options||this.__init(),o.isPlainObject(t)?o.assign(this.__options,t):this.__options[t]=!!o.isUndefined(n)||n},create:function(t,n){if(null==t&&(t={}),!o.isPlainObject(t))throw new Error("Plain object required");var e;return this.modelOptions.parser&&(t=this.modelOptions.parser(t)),this.__options.cache&&t[r.keyId]?(e=this.__cacheCollection.get(t))||(e=new this(t,n),this.__cacheCollection.add(e),this.__cacheCollection.size()>this.__options.cacheLimit&&this.__cacheCollection.shift()):e=new this(t,n),e},createCollection:function(t){return new a(o.assign({model:this},t))},createModels:function(t,n){o.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++)e[i]=this.create(t[i],n);return e},pull:function(t,n,e,i){o.isFunction(n)?(i=n,n=void 0):o.isFunction(e)&&(i=e,e=n,n=void 0);var r=this;return s.get(t,n,e).then(function(t){var n=r.createModels(e&&e.path?o.get(t,e.path):t,e);return r.__flagSaved(n),o.isFunction(i)&&i(null,t,n),n},function(t){throw o.isFunction(i)&&i(t),t})}}},function(t,n,e){t.exports=e(12)},function(t,n,e){(function(t){"use strict";function n(){function t(){return arguments.length>0&&arguments[0]!==v&&e(t,arguments[0]),t._state.value}return function(t){t.constructor=n,t._state={id:m++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0},t.map=t["fantasy-land/map"]=c,t["fantasy-land/ap"]=u,t["fantasy-land/of"]=n,t.valueOf=h,t.toJSON=l,t.toString=h,Object.defineProperties(t,{end:{get:function(){if(!t._state.endStream){var e=n();e.map(function(n){return!0===n&&(a(t),a(e)),n}),t._state.endStream=e}return t._state.endStream}}})}(t),arguments.length>0&&arguments[0]!==v&&e(t,arguments[0]),t}function e(t,n){i(t,n);for(var e in t._state.deps)o(t._state.deps[e],!1);!function(t){t._state.changed=!1;for(var n in t._state.deps)t._state.deps[n]._state.changed=!1}(t)}function i(t,n){t._state.value=n,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function o(t,n){var e=t._state.parents;if(e.length>0&&e.every(d)&&(n||e.some(_))){var o=t._state.derive();if(o===v)return!1;i(t,o)}}function s(t,e){if(!e.every(f))throw new Error("Ensure that each item passed to m.prop.combine/m.prop.merge is a stream");return function(t,n,e){var i=t._state;return i.derive=e,i.parents=n.filter(p),r(t,i.parents),o(t,!0),t}(n(),e,function(){return t.apply(this,e.concat([e.filter(_)]))})}function r(t,n){for(var e=0;e<n.length;e++)n[e]._state.deps[t._state.id]=t,r(t,n[e]._state.parents)}function a(t){for(var n=0;n<t._state.parents.length;n++){delete t._state.parents[n]._state.deps[t._state.id]}for(var e in t._state.deps){var i=t._state.deps[e],o=i._state.parents.indexOf(t);o>-1&&i._state.parents.splice(o,1)}t._state.state=2,t._state.deps={}}function c(t){return s(function(n){return t(n())},[this])}function u(t){return s(function(t,n){return t()(n())},[t,this])}function h(){return this._state.value}function l(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function f(t){return t._state}function d(t){return 1===t._state.state}function _(t){return t._state.changed}function p(t){return 2!==t._state.state}var m=0,v={};n["fantasy-land/of"]=n,n.merge=function(t){return s(function(){return t.map(function(t){return t()})},t)},n.combine=s,n.HALT=v,t.exports=n}).call(n,e(13)(t))},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);